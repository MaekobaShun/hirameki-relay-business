<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„É©„É≥„Ç≠„É≥„Ç∞ - „Å≤„Çâ„ÇÅ„Åç„É™„É¨„Éº</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/icon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='hub.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='ranking.css') }}">
    <script src="{{ url_for('static', filename='header.js') }}" defer></script>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <div class="logo-icon">üí°</div>
                <h1 class="logo-text">„Å≤„Çâ„ÇÅ„Åç„É™„É¨„Éº</h1>
            </div>
            <div class="header-right">
                <button class="menu-toggle" type="button" aria-label="„É°„Éã„É•„Éº„ÇíÈñã„Åè" aria-expanded="false">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <nav class="mypage-nav">
                    <a href="{{ url_for('index') }}">„Éõ„Éº„É†</a>
                    <a href="{{ url_for('form') }}">ÊäïÁ®ø</a>
                    <a href="{{ url_for('gacha') }}">„Ç¨„ÉÅ„É£</a>
                    <a href="{{ url_for('mypage') }}">„Éû„Ç§„Éö„Éº„Ç∏</a>
                    <a href="{{ url_for('ranking') }}" class="active">„É©„É≥„Ç≠„É≥„Ç∞</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="ranking-main">
        <div class="ranking-container">
            <div class="ranking-header">
                <h2 class="ranking-title">üìä ÊäïÁ®øÊï∞„É©„É≥„Ç≠„É≥„Ç∞</h2>
                <p class="ranking-subtitle">ÊúÄ„ÇÇÂ§ö„Åè„ÅÆ„Ç¢„Ç§„Éá„Ç¢„ÇíÊäïÁ®ø„Åó„Å¶„ÅÑ„Çã„É¶„Éº„Ç∂„Éº</p>
                {% if current_user_rank %}
                <div class="current-user-rank">
                    <span class="rank-label">„ÅÇ„Å™„Åü„ÅÆÈ†Ü‰Ωç:</span>
                    <span class="rank-value">{{ current_user_rank }}‰Ωç</span>
                </div>
                {% endif %}
            </div>

            <div class="ranking-tabs">
                <button class="tab-button active" data-tab="posts">
                    <span class="tab-label">ÊäïÁ®øÊï∞</span>
                </button>
                <button class="tab-button disabled" data-tab="inheritance" disabled>
                    <span class="tab-label">Á∂ôÊâøÊï∞</span>
                    <span class="tab-badge">Ê∫ñÂÇô‰∏≠</span>
                </button>
            </div>

            <div class="ranking-content">
                {% if rankings %}
                <div class="ranking-list">
                    {% for ranking in rankings %}
                    <div class="ranking-item {% if ranking.user_id == current_user_id %}current-user{% endif %}">
                        <div class="rank-number">
                            {% if ranking.rank == 1 %}
                                <span class="rank-icon">ü•á</span>
                            {% elif ranking.rank == 2 %}
                                <span class="rank-icon">ü•à</span>
                            {% elif ranking.rank == 3 %}
                                <span class="rank-icon">ü•â</span>
                            {% else %}
                                <span class="rank-text">{{ ranking.rank }}</span>
                            {% endif %}
                        </div>
                        <div class="user-info">
                            <div class="user-avatar">
                                {% if ranking.icon_path %}
                                    {% if ranking.icon_path.startswith('uploads/') %}
                                        <img src="{{ url_for('uploaded_file', filename=ranking.icon_path[8:]) }}" alt="{{ ranking.nickname }}" class="avatar-image">
                                    {% elif ranking.icon_path.startswith('http') %}
                                        <img src="{{ ranking.icon_path }}" alt="{{ ranking.nickname }}" class="avatar-image">
                                    {% else %}
                                        <img src="{{ url_for('static', filename=ranking.icon_path) }}" alt="{{ ranking.nickname }}" class="avatar-image">
                                    {% endif %}
                                {% else %}
                                    <span class="avatar-text">{{ ranking.nickname[0] if ranking.nickname else 'U' }}</span>
                                {% endif %}
                            </div>
                            <div class="user-details">
                                <div class="user-name">{{ ranking.nickname }}</div>
                                <div class="user-id">@{{ ranking.user_id }}</div>
                            </div>
                        </div>
                        <div class="rank-stats">
                            <div class="stat-value">{{ ranking.post_count }}</div>
                            <div class="stat-label">ÊäïÁ®ø</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-message">
                    <p>„Åæ„Å†„É©„É≥„Ç≠„É≥„Ç∞„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>
                </div>
                {% endif %}
            </div>
        </div>
    </main>
</body>
</html>
