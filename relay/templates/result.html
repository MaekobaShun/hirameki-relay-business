{% extends "base.html" %}

{% block title %}ã‚¬ãƒãƒ£çµæœ - ã²ã‚‰ã‚ããƒªãƒ¬ãƒ¼{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='result.css') }}">
{% endblock %}

{% block header_intro %}
<p class="header-eyebrow">RESULT</p>
<h1 class="header-title">ã‚¬ãƒãƒ£çµæœ</h1>
{% endblock %}

{% block content %}
<div class="result-main">
    <section class="result-wrapper">
        <div class="result-icon">ğŸ‰</div>
        <h2 class="result-title">ã‚¬ãƒãƒ£çµæœ</h2>

        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="result-flash">
            {% for message in messages %}
            <p>{{ message }}</p>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        {% if item %}
        <article class="result-card">
            <h3 class="result-card__title">{{ item[1] }}</h3>
            <p class="result-card__detail">{{ item[2] }}</p>
            <span class="result-card__category">ğŸ“ {{ item[3] }}</span>
            {% if inheritance_count is defined or gacha_count is defined %}
            <div class="result-stats">
                <div class="result-stat-item">
                    <span class="result-stat-icon">ğŸ”„</span>
                    <span class="result-stat-label">ç¶™æ‰¿ã•ã‚ŒãŸæ•°</span>
                    <span class="result-stat-value">{{ inheritance_count }}</span>
                </div>
                <div class="result-stat-item">
                    <span class="result-stat-icon">ğŸŸï¸</span>
                    <span class="result-stat-label">ã‚¬ãƒãƒ£ã§å¼•ã‹ã‚ŒãŸæ•°</span>
                    <span class="result-stat-value">{{ gacha_count }}</span>
                </div>
            </div>
            {% endif %}
        </article>
        {% else %}
        <div class="result-card">
            <p class="result-empty">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        </div>
        {% endif %}

        <div class="result-actions">
            <form action="{{ url_for('spin') }}" method="get" class="result-action-form">
                {% if request.args.get('category') %}
                <input type="hidden" name="category" value="{{ request.args.get('category') }}">
                {% endif %}
                <button type="submit" class="result-button secondary">ã‚‚ã†ä¸€åº¦å›ã™</button>
            </form>
            <a href="{{ url_for('gacha') }}" class="result-button">ã‚«ãƒ†ã‚´ãƒªé¸æŠç”»é¢ã«æˆ»ã‚‹</a>
        </div>
    </section>
</div>
{% endblock %}
